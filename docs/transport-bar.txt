Obi Transport bar specification
Julien Quint (ed.), Marisa DeMeglio, Avneesh Singh
$Id$


The transport bar includes three components:

  1. time display (in the book or in the audio block)
  2. transport buttons and controls (play, stop, record, forward, etc.)
  3. VU-meter

Having all components in the same window helps with screen reader as focus
does not have to move around.


1. Time display

The three units are the book, the section and the phrase (audio block.) For
simplification purposes, we will ignore sections at this time and focus on
the whole book and individual audio blocks only.

We need to introduce the notion of a current time position. This is either
the current time when playing, recording, or after having paused or stopped.
The current position is shown in a time display, as well as the section view
or the strip view, whichever has the focus.

In the section view, the section in which the current time happens is
highlighted. In the strip view, the phrase in which the current time happens
is highlighted. Since there is no wave display, there is no detailed display
of the current position inside the audio block. Conversely, selecting a
strip or an audio block places the current time at the beginning of the
section (i.e. first audio block) or the audio block that is selected. When
nothing is selected, the current position is assumed to be at the beginning
of the book.

A simple, unsurprising time display could follow the example set by CD
players (which most users would be familiar with): the phrase is considered
like a "track" of a CD, then the display always shows the current time in
the current phrase. Clicking (or using a shortcut key) the display can
display the remaining time in the phrase, then in the book, then back to the
regular display. Double-clicking the display could allow the user to set a
time either in the phrase or the book.


2. Buttons and controls

Easy access to playing, navigating and recording. Must make the life of the
user easier. Importantly for accessibility, all controls must be accessible
through the keyboard. Button controls are also reflected in a "Transport" or
"Play" menu.

List of buttons:

  * Play/pause: this is the most important button, and is actually a little
  complicated. When the player is stopped or paused, it behaves as "Play",
  when the player is playing, it behaves as "Pause." Clicking "Play" once
  plays from the current position to the end of the book. Double-clicking
  "Play" plays only to the end of the current phrase and stops (or more
  acurately pauses), setting the current position to the beginning of the
  following sentence.
  
  * Stop: immediately stop playing, move the current time position back to
  the beginning of the phrase or the beginning of the book depending on what
  was playing.

  * Record: starts listening; actual recording happens once the play button
  is pressed. When recording, play becomes pause and can be used to pause
  and resume recording (when pausing, the recorder is in a listening state;
  when resuming, a new phrase is created.) The stop button stops the
  recording. Record is only available when the player is stopped, and a strip
  or an audio block is selected.

  Marking phrases while recording: we could have two new buttons (marking a
  new phrase, marking a new page), or use the forward button. It makes
  sense for the "forward one phrase" button (see below); we could
  double-click to add a new page marker; and add sections (with a default
  title) with the "next section" button.

  * Back one phrase: goes back one phrase. If the current position is
  further than the beginning of the phrase (meaning a small amount of time
  after the beginning), then goes back to the beginning. If the current
  position is at the beginning of a phrase, goes to the beginning of the
  previous phrase. Section boundaries can be skipped; cannot go further than
  the first phrase of the first section. When the player is stopped, there
  is no effect. When the player is paused, the change in position is
  mirrored in the time display and the currently active view (strips or
  TOC.) When the player is playing, playback skips directly to the new
  point.

  * Back one section: goes back one section; i.e. the beginning of the first
  phrase of the section. Sections with no audio are skipped. See above for
  details.

  * Forward one phrase: goes forward one phrase, i.e. to the beginning of
  the next phrase. Otherwise, same as back.

  * Forward one section: goes forward one section, i.e. to the beginning of
  the first phrase of the next section that has audio content.

Time slider: for time navigation within a phrase, we can use a slider rather
than a complicated set of buttons. Using the slider when the player is
stopped has no effect. When the player is paused, the time display is
updated (like using the back/forward buttons.) When the player is playing,
using the slider plays short snippets of sound while the slider is being
moved for the user to get audio feedback.

One problem to solve: is the slider limited to phrase-only or book-only? Are
there two sliders?


3. VU-meter

The VU-meter should be made smaller and integrated into the transport
bar/time display. Animation should be smoother (see how to solve that.)

When playing, the VU-meter should reflect the volume of the audio playing.
When recording/listening, the VU-meter should reflect the volume of the
incoming audio. It should show the highest value, with a flag when an
overload happens; and the display for this value must be resettable.


4. Task list

TODO
